# Five Points - Basic Game E2E Test
# Tests login, game creation, and basic navigation

appId: golf.spicy
---
# ===== AUTHENTICATION =====
# Log in with the test account passphrase

- launchApp:
    clearState: true

# Take screenshot to debug what's on screen
- takeScreenshot: after_launch

# Wait for auth screen to load (app may show loading screen briefly during init)
# Increase timeout to 60s to account for slow emulators and bundle loading
- extendedWaitUntil:
    visible: "Spicy Golf"
    timeout: 60000

# Log in with test passphrase
# iOS Button renders uppercase. Use regex for case-insensitive match.
- tapOn:
    text: "(?i)Log In"
- tapOn:
    text: "(?i)Enter your passphrase"
- inputText: "${TEST_PASSPHRASE}"
# Dismiss keyboard by tapping outside the text field
- tapOn:
    text: "(?i)Enter your recovery passphrase"
- tapOn:
    text: "(?i)Log In"
    index: 1

# Wait for login to complete
- extendedWaitUntil:
    visible: "New Game"
    timeout: 10000

# ===== CREATE GAME =====

- tapOn: "New Game"

# Switch to Search tab to find Five Points
- tapOn: "Search"

# Wait for specs to load from API
- extendedWaitUntil:
    visible: "Five Points"
    timeout: 15000

- tapOn: "Five Points"
# ===== VERIFICATION =====
# At this point we have:
# 1. Successfully logged in
# 2. Created a Five Points game
# 3. Navigated to the game screen
